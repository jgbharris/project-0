"use strict";$(function(){console.log("Woohoo!!!!!!");var l=l||{};l.$startgame=$("#startgame"),l.$audio=$("#audiobackground")[0],l.$audio1=$("#audioclick")[0],l.$audio2=$("#audiowin")[0],l.askPlayerName1=prompt("Player 1 please enter your name?"),l.askPlayerName2=prompt("Player 2 please enter your name?"),l.$cells=$(".cell"),l.turnCounter=null,l.$resetButton=$("#reset"),l.$stopMusic=$("#stopmusic"),l.$sunBackground=$("#sunbackground"),l.$tronBackground=$("#tronbackground"),l.$triangleBackground=$("#trianglebackground"),l.$body=$("body"),l.$playerDisplay=$(".playerdisplay"),l.vWin="vertical win",l.winSound="win",l.vWinBackground="taco.gif",l.hWin="horizontal win",l.hWinBackground="mandance.gif",l.dWin="diagonal win",l.dWinBackground="celebration.gif",l.sunBgFile="sunbackground.gif",l.tronBgFile="tronwallpaper.png",l.triangleBgFile="lasertriangle.gif",l.$gameSetupButton=$("#game_setup_button"),l.$backgroundOptionsButton=$("#background_options_button"),l.victory=function(o,n,e){console.log(""+o),responsiveVoice.speak(""+o),l.$audio2.src="sounds/"+n+".wav",l.$audio2.play(),l.$audio.pause(),l.$playerDisplay.html(""+o),l.$body.css("background-image","url(public/css/"+e+")")},l.changeBackground=function(o){console.log("change background!"),l.$body.css("background-image","url(public/css/"+o+")")},l.$gameSetupButton.on("click",function(o){l.$startgame.slideDown(200),l.$stopMusic.slideDown(200),l.$resetButton.slideDown(200)}),l.$backgroundOptionsButton.on("click",function(o){l.$sunBackground.slideDown(200),l.$tronBackground.slideDown(200),l.$triangleBackground.slideDown(200)}),l.$startgame.on("click",function(o){console.log("clicked"),l.$audio.src="sounds/arcadefunk.mp3",l.$audio.play(),responsiveVoice.speak("Hello "+l.askPlayerName1+" and "+l.askPlayerName2+", welcome to funky laser connect 4, I am the game master, begin!")}),l.$stopMusic.on("click",function(o){console.log("stop music!"),l.$audio.pause()}),l.$resetButton.on("click",function(o){l.$cells.html(""),l.$playerDisplay.html("win display"),l.$cells.removeClass("pink blue playable"),l.$cells.addClass("notplayable"),[35,36,37,38,39,40,41].forEach(function(o){l.$cells.eq(o).removeClass("notplayable").addClass("playable")}),l.changeBackground(l.triangleBgFile)}),l.$sunBackground.on("click",function(){l.changeBackground(l.sunBgFile)}),l.$tronBackground.on("click",function(){l.changeBackground(l.tronBgFile)}),l.$triangleBackground.on("click",function(){l.changeBackground(l.triangleBgFile)}),l.$cells.on("click",function(o){var n=l.turnCounter%2==0?"blue":"pink",e=l.turnCounter%2==0?"X":"O";if($(o.target).hasClass("playable")){var a=$(o.target).index();$(o.target).html(e),$(o.target).addClass(n),$(o.target).removeClass("playable"),$(o.target).addClass("notplayable"),l.$cells.eq(a-7).removeClass("notplayable").addClass("playable"),l.turnCounter++,l.checkForWin(a),l.$audio1.src="sounds/boing1.wav",l.$audio1.play()}}),l.checkForWin=function(o){console.log("index",o,l.$cells.eq(o+7)),l.$cells.eq(o).html()===l.$cells.eq(o+7).html()&&l.$cells.eq(o+7).html()===l.$cells.eq(o+14).html()&&l.$cells.eq(o+14).html()===l.$cells.eq(o+21).html()&&l.victory(l.vWin,l.winSound,l.vWinBackground),(l.$cells.eq(o).html()===l.$cells.eq(o+6).html()&&l.$cells.eq(o+6).html()===l.$cells.eq(o+12).html()&&l.$cells.eq(o+12).html()===l.$cells.eq(o+18).html()||l.$cells.eq(o).html()===l.$cells.eq(o+8).html()&&l.$cells.eq(o+8).html()===l.$cells.eq(o+16).html()&&l.$cells.eq(o+16).html()===l.$cells.eq(o+24).html())&&l.victory(l.dWin,l.winSound,l.dWinBackground),console.log(Math.floor(o/7),Math.floor((o-3)/7),Math.floor((o+3)/7)),Math.floor(o/7)!==Math.floor((o-3)/7)&&Math.floor(o/7)!==Math.floor((o+3)/7)||function(){console.log("checking horizontal win");for(var n=7*Math.floor(o/7)+6,e=0;n>=7*Math.floor(o/7)+3;){if([0,-1,-2,-3].forEach(function(o){console.log(l.turnCounter%2==0?"O":"X"),l.$cells.eq(n+o).html()===(l.turnCounter%2==0?"O":"X")&&e++}),4===e){l.victory(l.hWin,l.winSound,l.hWinBackground);break}n--,e=0}}()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiY29uc29sZSIsImxvZyIsImNmb3VyIiwiJGF1ZGlvIiwiJHN0YXJ0Z2FtZSIsIiRhdWRpbzEiLCJwcm9tcHQiLCIkYXVkaW8yIiwiYXNrUGxheWVyTmFtZTEiLCJhc2tQbGF5ZXJOYW1lMiIsIiRjZWxscyIsInR1cm5Db3VudGVyIiwiJHJlc2V0QnV0dG9uIiwiJHN0b3BNdXNpYyIsIiRzdW5CYWNrZ3JvdW5kIiwiJHRyb25CYWNrZ3JvdW5kIiwiJHRyaWFuZ2xlQmFja2dyb3VuZCIsIiRib2R5IiwiJHBsYXllckRpc3BsYXkiLCJ2V2luIiwid2luU291bmQiLCJ2V2luQmFja2dyb3VuZCIsImhXaW4iLCJoV2luQmFja2dyb3VuZCIsImRXaW4iLCJkV2luQmFja2dyb3VuZCIsInN1bkJnRmlsZSIsInRyb25CZ0ZpbGUiLCJ0cmlhbmdsZUJnRmlsZSIsInZpY3RvcnkiLCJBIiwiQiIsIkMiLCJzcGVhayIsInJlc3BvbnNpdmVWb2ljZSIsInNyYyIsInBhdXNlIiwiaHRtbCIsImNoYW5nZUJhY2tncm91bmQiLCJEIiwiY3NzIiwiJGdhbWVTZXR1cEJ1dHRvbiIsIm9uIiwiZSIsInNsaWRlRG93biIsIiRiYWNrZ3JvdW5kT3B0aW9uc0J1dHRvbiIsInBsYXkiLCJhZGRDbGFzcyIsImluZGljZXMiLCJpbmRleCIsInJlbW92ZUNsYXNzIiwiZm9yRWFjaCIsImVxIiwidGFyZ2V0IiwiY2hlY2tGb3JXaW4iLCJjb3VudGVyIiwiY29sb3IiLCJ0b3BPZlJvdyIsImZsb29yIiwic3RyZWFrIiwiTWF0aCIsImkiXSwibWFwcGluZ3MiOiJZQUFBQSxHQUFFLFdBQ0FDLFFBQVFDLElBQUksZUFFWixJQUFBQyxHQUFBQSxLQUVBQSxHQUFJQSxXQUFRQSxFQUFTLGNBR3JCQSxFQUFNQyxPQUFTSixFQUFFLG9CQUFvQixHQURyQ0csRUFBTUUsUUFBTkwsRUFBQSxlQUFtQixHQUNuQkcsRUFBTUMsUUFBU0osRUFBRSxhQUFBLEdBQ2pC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QUFBSSxHQUFBeEIsVUFBQW5DLEVBQUFTLFlBQUEsR0FBQSxFQUFBLElBQUEsTUFvTGNnRCxNQUlVLElBQVhBLEVBQWMsQ0FDZnpELEVBQU0yQixRQUFRM0IsRUFBTW9CLEtBQUtwQixFQUFNa0IsU0FBU2xCLEVBQU1xQixlQUM5QyxPQUdGa0MsSUFDQUUsRUFBUyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgY29uc29sZS5sb2coJ1dvb2hvbyEhISEhIScpO1xuXG4gIC8vIENPTlNUQU5UUyBFVEMgLy9cblxuICB2YXIgY2ZvdXIgPSBjZm91ciB8fCB7fTtcblxuICBjZm91ci4kc3RhcnRnYW1lID0gJCgnI3N0YXJ0Z2FtZScpO1xuICBjZm91ci4kYXVkaW8gPSAkKCcjYXVkaW9iYWNrZ3JvdW5kJylbMF07XG4gIGNmb3VyLiRhdWRpbzEgPSAkKCcjYXVkaW9jbGljaycpWzBdO1xuICBjZm91ci4kYXVkaW8yID0gJCgnI2F1ZGlvd2luJylbMF07XG4gIGNmb3VyLmFza1BsYXllck5hbWUxID0gcHJvbXB0KCdQbGF5ZXIgMSBwbGVhc2UgZW50ZXIgeW91ciBuYW1lPycpO1xuICBjZm91ci5hc2tQbGF5ZXJOYW1lMiA9IHByb21wdCgnUGxheWVyIDIgcGxlYXNlIGVudGVyIHlvdXIgbmFtZT8nKTtcbiAgY2ZvdXIuJGNlbGxzID0gJCgnLmNlbGwnKTtcbiAgY2ZvdXIudHVybkNvdW50ZXIgPSBudWxsO1xuICBjZm91ci4kcmVzZXRCdXR0b24gPSAkKCcjcmVzZXQnKTtcbiAgY2ZvdXIuJHN0b3BNdXNpYyA9ICQoJyNzdG9wbXVzaWMnKTtcbiAgY2ZvdXIuJHN1bkJhY2tncm91bmQgPSAkKCcjc3VuYmFja2dyb3VuZCcpO1xuICBjZm91ci4kdHJvbkJhY2tncm91bmQgPSAkKCcjdHJvbmJhY2tncm91bmQnKTtcbiAgY2ZvdXIuJHRyaWFuZ2xlQmFja2dyb3VuZCA9ICQoJyN0cmlhbmdsZWJhY2tncm91bmQnKTtcbiAgY2ZvdXIuJGJvZHkgPSAkKCdib2R5Jyk7XG4gIGNmb3VyLiRwbGF5ZXJEaXNwbGF5ID0gJCgnLnBsYXllcmRpc3BsYXknKTtcbiAgY2ZvdXIudldpbiA9ICd2ZXJ0aWNhbCB3aW4nO1xuICBjZm91ci53aW5Tb3VuZCA9ICd3aW4nO1xuICBjZm91ci52V2luQmFja2dyb3VuZCA9ICd0YWNvLmdpZic7XG4gIGNmb3VyLmhXaW4gPSAnaG9yaXpvbnRhbCB3aW4nO1xuICBjZm91ci5oV2luQmFja2dyb3VuZCA9ICdtYW5kYW5jZS5naWYnO1xuICBjZm91ci5kV2luID0gJ2RpYWdvbmFsIHdpbic7XG4gIGNmb3VyLmRXaW5CYWNrZ3JvdW5kID0gJ2NlbGVicmF0aW9uLmdpZic7XG4gIGNmb3VyLnN1bkJnRmlsZSA9ICdzdW5iYWNrZ3JvdW5kLmdpZic7XG4gIGNmb3VyLnRyb25CZ0ZpbGUgPSAndHJvbndhbGxwYXBlci5wbmcnO1xuICBjZm91ci50cmlhbmdsZUJnRmlsZSA9ICdsYXNlcnRyaWFuZ2xlLmdpZic7XG4gIGNmb3VyLiRnYW1lU2V0dXBCdXR0b24gPSAkKCcjZ2FtZV9zZXR1cF9idXR0b24nKTtcbiAgY2ZvdXIuJGJhY2tncm91bmRPcHRpb25zQnV0dG9uID0gJCgnI2JhY2tncm91bmRfb3B0aW9uc19idXR0b24nKTtcblxuXG4gIGNmb3VyLnZpY3RvcnkgPSBmdW5jdGlvbiB2aWN0b3J5IChBLEIsQykge1xuICAgIGNvbnNvbGUubG9nKGAke0F9YCk7XG4gICAgcmVzcG9uc2l2ZVZvaWNlLnNwZWFrKGAke0F9YCk7XG4gICAgY2ZvdXIuJGF1ZGlvMi5zcmMgPSBgc291bmRzLyR7Qn0ud2F2YDtcbiAgICBjZm91ci4kYXVkaW8yLnBsYXkoKTtcbiAgICBjZm91ci4kYXVkaW8ucGF1c2UoKTtcbiAgICBjZm91ci4kcGxheWVyRGlzcGxheS5odG1sKGAke0F9YCk7XG4gICAgY2ZvdXIuJGJvZHkuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybChwdWJsaWMvY3NzLyR7Q30pYCk7XG4gIH07XG5cbiAgY2ZvdXIuIGNoYW5nZUJhY2tncm91bmQgPSBmdW5jdGlvbiBjaGFuZ2VCYWNrZ3JvdW5kIChEKSB7XG4gICAgY29uc29sZS5sb2coJ2NoYW5nZSBiYWNrZ3JvdW5kIScpO1xuICAgIGNmb3VyLiRib2R5LmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwocHVibGljL2Nzcy8ke0R9KWApO1xuICB9O1xuXG4gIC8vIEdBTUUgU0VUVVAgRFJPUERPV04gLy9cbiAgY2ZvdXIuJGdhbWVTZXR1cEJ1dHRvbi5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNmb3VyLiRzdGFydGdhbWUuc2xpZGVEb3duKDIwMCk7XG4gICAgY2ZvdXIuJHN0b3BNdXNpYy5zbGlkZURvd24oMjAwKTtcbiAgICBjZm91ci4kcmVzZXRCdXR0b24uc2xpZGVEb3duKDIwMCk7XG5cbiAgfSk7XG5cbiAgLy8gQkFDS0dST1VORCBPUFRJT05TIERST1BET1dOIC8vXG4gIGNmb3VyLiRiYWNrZ3JvdW5kT3B0aW9uc0J1dHRvbi5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNmb3VyLiRzdW5CYWNrZ3JvdW5kLnNsaWRlRG93bigyMDApO1xuICAgIGNmb3VyLiR0cm9uQmFja2dyb3VuZC5zbGlkZURvd24oMjAwKTtcbiAgICBjZm91ci4kdHJpYW5nbGVCYWNrZ3JvdW5kLnNsaWRlRG93bigyMDApO1xuXG4gIH0pO1xuXG5cblxuICAvLyBTVEFSVCBHQU1FIEJVVFRPTiAvL1xuICBjZm91ci4kc3RhcnRnYW1lLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2NsaWNrZWQnKTtcbiAgICBjZm91ci4kYXVkaW8uc3JjID0gJ3NvdW5kcy9hcmNhZGVmdW5rLm1wMyc7XG4gICAgY2ZvdXIuJGF1ZGlvLnBsYXkoKTtcbiAgICByZXNwb25zaXZlVm9pY2Uuc3BlYWsoYEhlbGxvICR7Y2ZvdXIuYXNrUGxheWVyTmFtZTF9IGFuZCAke2Nmb3VyLmFza1BsYXllck5hbWUyfSwgd2VsY29tZSB0byBmdW5reSBsYXNlciBjb25uZWN0IDQsIEkgYW0gdGhlIGdhbWUgbWFzdGVyLCBiZWdpbiFgKTtcbiAgfSk7XG5cbiAgLy9TVE9QIE1VU0lDIEJVVFRPTi8vXG4gIGNmb3VyLiRzdG9wTXVzaWMub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zb2xlLmxvZygnc3RvcCBtdXNpYyEnKTtcbiAgICBjZm91ci4kYXVkaW8ucGF1c2UoKTtcbiAgfSk7XG5cblxuICAvLyBSRVNFVCBCVVRUT04gLSBTRVRTIEFMTCBIVE1MIElOIENFTExTIFRPIE5PVEhJTkcgQU5EIENIQU5HRVMgQUxMIEJBQ0tHUk9VTkQgVE8gVFJBTlNQQVJFTlQgLy9cbiAgY2ZvdXIuJHJlc2V0QnV0dG9uLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgY2ZvdXIuJGNlbGxzLmh0bWwoJycpO1xuICAgIGNmb3VyLiRwbGF5ZXJEaXNwbGF5Lmh0bWwoJ3dpbiBkaXNwbGF5Jyk7XG4gICAgY2ZvdXIuJGNlbGxzLnJlbW92ZUNsYXNzKCdwaW5rIGJsdWUgcGxheWFibGUnKTtcbiAgICBjZm91ci4kY2VsbHMuYWRkQ2xhc3MoJ25vdHBsYXlhYmxlJyk7XG4gICAgY29uc3QgaW5kaWNlcyA9IFszNSwzNiwzNywzOCwzOSw0MCw0MV07XG4gICAgaW5kaWNlcy5mb3JFYWNoKChpbmRleCk9PntcbiAgICAgIGNmb3VyLiRjZWxscy5lcShpbmRleCkucmVtb3ZlQ2xhc3MoJ25vdHBsYXlhYmxlJykuYWRkQ2xhc3MoJ3BsYXlhYmxlJyk7XG4gICAgfSk7XG4gICAgY2ZvdXIuY2hhbmdlQmFja2dyb3VuZChjZm91ci50cmlhbmdsZUJnRmlsZSk7XG5cbiAgfSk7XG5cblxuICAvL1NVTiBCQUNLR1JPVU5EIEJVVFRPTi8vXG4gIGNmb3VyLiRzdW5CYWNrZ3JvdW5kLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjZm91ci5jaGFuZ2VCYWNrZ3JvdW5kKGNmb3VyLnN1bkJnRmlsZSk7XG4gIH0pO1xuXG4vL1RST04gQkFDS0dST1VORCBCVVRUT04vL1xuICBjZm91ci4kdHJvbkJhY2tncm91bmQub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNmb3VyLmNoYW5nZUJhY2tncm91bmQoY2ZvdXIudHJvbkJnRmlsZSk7XG4gIH0pO1xuXG4vL1RSSUFOR0xFIEJBQ0tHUk9VTkQgQlVUVE9OLy9cbiAgY2ZvdXIuJHRyaWFuZ2xlQmFja2dyb3VuZC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgY2ZvdXIuY2hhbmdlQmFja2dyb3VuZChjZm91ci50cmlhbmdsZUJnRmlsZSk7XG4gIH0pO1xuXG5cbiAgLy8gQ0xJQ0sgT04gU1FVQVJFOiBQVVRTIFggT1IgTyBJTiBTUVVBUkUsIENIQU5HRVMgQ09MT1IsICBBRERTIDEgVE8gVFVSTiBDT1VOVEVSLCBNQUtFUyBTUVVBUkUgVU5QTEFZQUJMRSAoQ0FOJ1QgUExBQ0UgQU5PVEhFUiBQSUVDRSBPTiBTUVVBUkUpIEFORCBNQUtFUyBTUVVBUkUgQUJPVkUgUExBWUFCTEVcblxuXG4gIGNmb3VyLiRjZWxscy5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IGNvbG9yID0gY2ZvdXIudHVybkNvdW50ZXIgJSAyID09PSAwID8gJ2JsdWUnIDogJ3BpbmsnO1xuICAgIGNvbnN0IGNvdW50ZXIgPSBjZm91ci50dXJuQ291bnRlciAlIDIgPT09IDAgPyAnWCcgOiAnTyc7XG4gICAgaWYgKCQoZS50YXJnZXQpLmhhc0NsYXNzKCdwbGF5YWJsZScpKSB7XG4gICAgICBjb25zdCBpbmRleCA9ICQoZS50YXJnZXQpLmluZGV4KCk7XG4gICAgICAkKGUudGFyZ2V0KS5odG1sKGNvdW50ZXIpO1xuICAgICAgJChlLnRhcmdldCkuYWRkQ2xhc3MoY29sb3IpO1xuICAgICAgJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3BsYXlhYmxlJyk7XG4gICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcygnbm90cGxheWFibGUnKTtcbiAgICAgIGNmb3VyLiRjZWxscy5lcShpbmRleCAtNykucmVtb3ZlQ2xhc3MoJ25vdHBsYXlhYmxlJykuYWRkQ2xhc3MoJ3BsYXlhYmxlJyk7XG4gICAgICBjZm91ci50dXJuQ291bnRlcisrO1xuICAgICAgY2ZvdXIuY2hlY2tGb3JXaW4oaW5kZXgpO1xuICAgICAgY2ZvdXIuJGF1ZGlvMS5zcmMgPSAnc291bmRzL2JvaW5nMS53YXYnO1xuICAgICAgY2ZvdXIuJGF1ZGlvMS5wbGF5KCk7XG4gICAgfVxuICB9KTtcblxuXG4gICAgLy8gV0lOIENPTkRJVElPTlMgLy9cblxuXG4gICAgY2ZvdXIuY2hlY2tGb3JXaW4gPSBmdW5jdGlvbiBjaGVja0ZvcldpbihpbmRleCkge1xuICAgICAgLy8gVkVSVElDQUwgV0lOIENIRUNLIC0gQVMgWU9VIENMSUNLIFRPIFBMQUNFIFlPVVIgQ09MT1VSLCBDSEVDS1MgRk9SIE1BVENISU5HIENPTE9VUlMgSU4gVEhFIFNRVUFSRVMgQkVMT1csIEFDSElFVkVEIEJZIEFERElORyBUSEUgV0lEVEggT0ZHIFRIRSBCT0FSRCAoNykgVE8gVEhFIElOREVYIE5VTUJFUiBPRiBUSEUgU1FVQVJFIFlPVSBDTElDS0VEIE9OLy9cblxuICAgICAgY29uc29sZS5sb2coJ2luZGV4JywgaW5kZXgsIGNmb3VyLiRjZWxscy5lcShpbmRleCs3KSk7XG5cbiAgICAgIC8vIGNvbnN0IGN1cnJlbnRJbmRleCA9ICQoZS50YXJnZXQpLmluZGV4KCk7XG4gICAgICAvLyBjb25zb2xlLmxvZygkY2VsbHMuZXEoaW5kZXgrNykuaHRtbCgpKTtcbiAgICAgIGlmIChjZm91ci4kY2VsbHMuZXEoaW5kZXgpLmh0bWwoKSA9PT0gY2ZvdXIuJGNlbGxzLmVxKGluZGV4KzcpLmh0bWwoKSAmJlxuICAgICAgY2ZvdXIuJGNlbGxzLmVxKGluZGV4KzcpLmh0bWwoKSA9PT0gY2ZvdXIuJGNlbGxzLmVxKGluZGV4KzE0KS5odG1sKCkgJiZcbiAgICAgIGNmb3VyLiRjZWxscy5lcShpbmRleCsxNCkuaHRtbCgpID09PSBjZm91ci4kY2VsbHMuZXEoaW5kZXgrMjEpLmh0bWwoKSkge1xuICAgICAgICBjZm91ci52aWN0b3J5KGNmb3VyLnZXaW4sY2ZvdXIud2luU291bmQsY2ZvdXIudldpbkJhY2tncm91bmQpO1xuICAgICAgfVxuXG5cbiAgICAgIC8vIERJQUdPTkFMIFdJTiBDSEVDSy0gRElBR09OQUwgU1FVQVJFUyBBUkUgT04gVEhFIFdJRFRIIE9GIFRIRSBCT0FSRCAoNykgUExVUyBPUiBNSU5VUyBPTkUuIEFTIFlPVSBHTyBWRVJUSUNBTExZIFVQIFRIRSBCT0FSRCBXSElMRSBQTEFZSU5HLCBUSEUgSU5ERVggT0YgVEhFIFNRVUFSRSBZT1UgQ0xJQ0sgT04gV0lMTCBCRSBMT1dFUiwgVEhFUkVGT1JFIFdFIE5FRUQgVE8gQ0hFQ0sgVEhFIFNRVUFSRVMgRlVSVEhFUiBVUCBUSEUgSU5ERVgsIEhFTkNFIFRIRSBDSEVDS1MgQVJFIFBPU0lUSVZFIElOIEVJVEhFUiBNVUxUSVBMRVMgT0YgNig3LTEpIE9SIDgoNysxKS5cblxuICAgICAgaWYgKGNmb3VyLiRjZWxscy5lcShpbmRleCkuaHRtbCgpID09PSBjZm91ci4kY2VsbHMuZXEoaW5kZXgrNikuaHRtbCgpICYmXG4gICAgICBjZm91ci4kY2VsbHMuZXEoaW5kZXgrNikuaHRtbCgpID09PSBjZm91ci4kY2VsbHMuZXEoaW5kZXgrMTIpLmh0bWwoKSAmJlxuICAgICAgY2ZvdXIuJGNlbGxzLmVxKGluZGV4KzEyKS5odG1sKCkgPT09IGNmb3VyLiRjZWxscy5lcShpbmRleCsxOCkuaHRtbCgpXG4gICAgICB8fFxuICAgICAgY2ZvdXIuJGNlbGxzLmVxKGluZGV4KS5odG1sKCkgPT09IGNmb3VyLiRjZWxscy5lcShpbmRleCs4KS5odG1sKCkgJiZcbiAgICAgIGNmb3VyLiRjZWxscy5lcShpbmRleCs4KS5odG1sKCkgPT09IGNmb3VyLiRjZWxscy5lcShpbmRleCsxNikuaHRtbCgpICYmXG4gICAgICBjZm91ci4kY2VsbHMuZXEoaW5kZXgrMTYpLmh0bWwoKSA9PT0gY2ZvdXIuJGNlbGxzLmVxKGluZGV4KzI0KS5odG1sKCkpIHtcbiAgICAgICAgY2ZvdXIudmljdG9yeShjZm91ci5kV2luLGNmb3VyLndpblNvdW5kLGNmb3VyLmRXaW5CYWNrZ3JvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLy8gSE9SSVpPTlRBTCBXSU4gQ0hFQ0sgLSBDSEVDS1MgVE8gU0VFIFdIRVRIRVIgQ0VMTFMgQVJFIElOIFRIRSBTQU1FIFJPVyBCWSBUQUtJTkcgVEhFIE1BVEguRkxPT1IgT0YgVEhFIElOREVYIE5VTUJFUiBPVkVSIFRIRSBXSURUSCBPRiBUSEUgQk9BUkQgKDcpLiBGSU5EUyBUT1AgT0YgVEhFIFJFTEVWQU5UIFJPVyBCWSBBRERJTkcgNiBUTyBUSEUgTUFUSC5GTE9PUiBPRiBUSEUgQ0VMTCBJTkRFWCAvIDcuIFNUQVJUUyBMT09QIEFUIFRPUCBPRiBST1cgTE9PS0lORyBGT1IgU0VRVUVOVElBTCBNQVRDSEVTIElOIFRIRSBDRUxMUywgSUYgSVQgRklORFMgT05FLCBUSEUgU1RSRUFLIENPVU5URVIgQUREUyAxLiBIT1JJWk9OVEFMIFdJTiBBTk5PVU5DRVMgV0hFTiBTVFJFQUsgSElUUyA0LlxuXG4gICAgICBjb25zb2xlLmxvZyhNYXRoLmZsb29yKGluZGV4LzcpLCBNYXRoLmZsb29yKChpbmRleC0zKS83KSwgTWF0aC5mbG9vcigoaW5kZXgrMykvNykpO1xuXG4gICAgICBpZiAoTWF0aC5mbG9vcihpbmRleC83KSA9PT0gTWF0aC5mbG9vcigoaW5kZXgtMykvNykgfHwgTWF0aC5mbG9vcihpbmRleC83KSA9PT0gTWF0aC5mbG9vcigoaW5kZXgrMykvNykpe1xuICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tpbmcgaG9yaXpvbnRhbCB3aW4nKTtcbiAgICAgICAgLy8gZmluZCB0b3Agb2YgUk9XXG4gICAgICAgIGxldCB0b3BPZlJvdyA9IE1hdGguZmxvb3IoaW5kZXgvNykgKiA3ICsgNjtcbiAgICAgICAgbGV0IHN0cmVhayAgPSAwO1xuXG4gICAgICAgIHdoaWxlKHRvcE9mUm93ID49IE1hdGguZmxvb3IoaW5kZXgvNykgKiA3ICsgMykge1xuICAgICAgICAgIC8vIGNoZWNrIDQgZnJvbSBzdGFydCBvZiBST1dcbiAgICAgICAgICBbMCwtMSwtMiwtM10uZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coKGNmb3VyLnR1cm5Db3VudGVyICUgMiA9PT0gMCA/ICdPJyA6ICdYJykpO1xuICAgICAgICAgICAgaWYoY2ZvdXIuJGNlbGxzLmVxKHRvcE9mUm93ICsgaSkuaHRtbCgpID09PSAoY2ZvdXIudHVybkNvdW50ZXIgJSAyID09PSAwID8gJ08nIDogJ1gnKSkge1xuICAgICAgICAgICAgICBzdHJlYWsrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmKHN0cmVhayA9PT0gNCkge1xuICAgICAgICAgICAgY2ZvdXIudmljdG9yeShjZm91ci5oV2luLGNmb3VyLndpblNvdW5kLGNmb3VyLmhXaW5CYWNrZ3JvdW5kKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRvcE9mUm93LS07XG4gICAgICAgICAgc3RyZWFrID0gMDtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgIH07XG5cblxufSk7XG4iXX0=
