"use strict";$(function(){function o(o,l,n){console.log(""+o),responsiveVoice.speak(""+o),t.src="sounds/"+l+".wav",t.play(),e.pause(),p.html(""+o),f.css("background-image","url(public/css/"+n+")")}function l(o){console.log("change background!"),f.css("background-image","url(public/css/"+o+")")}console.log("Woohoo!!!!!!");var n=$("#startgame"),e=$("#audiobackground")[0],a=$("#audioclick")[0],t=$("#audiowin")[0],c=prompt("Player 1 please enter your name?"),s=prompt("Player 2 please enter your name?"),i=$(".cell"),r=null,u=$("#reset"),g=$("#stopmusic"),h=$("#sunbackground"),d=$("#tronbackground"),m=$("#trianglebackground"),f=$("body"),p=$(".playerdisplay"),k="vertical win",b="win",q="taco.gif",w="horizontal win",y="mandance.gif",v="diagonal win",M="celebration.gif",C=$("#game_setup_button"),D=$("#background_options_button");C.on("click",function(o){n.slideDown(200),g.slideDown(200),u.slideDown(200)}),D.on("click",function(o){h.slideDown(200),d.slideDown(200),m.slideDown(200)}),n.on("click",function(o){console.log("clicked"),e.src="sounds/arcadefunk.mp3",e.play(),responsiveVoice.speak("Hello "+c+" and "+s+"  and welcome to funky laser connect 4")}),g.on("click",function(o){console.log("stop music!"),e.pause()}),h.on("click",function(){l("sunbackground.gif")}),d.on("click",function(){l("tronwallpaper.png")}),m.on("click",function(){l("lasertriangle.gif")}),i.on("click",function(l){var n=r%2==0?"#00FFFF":"#FF00CC",e=r%2==0?"X":"O";if($(l.target).hasClass("playable")){var t=$(l.target).index();$(l.target).html(e),$(l.target).css("background-color",n),$(l.target).removeClass("playable"),$(l.target).addClass("notplayable"),i.eq(t-7).removeClass("notplayable").addClass("playable"),r++,function(l){console.log("index",l,i.eq(l+7)),i.eq(l).html()===i.eq(l+7).html()&&i.eq(l+7).html()===i.eq(l+14).html()&&i.eq(l+14).html()===i.eq(l+21).html()&&o(k,b,q),(i.eq(l).html()===i.eq(l+6).html()&&i.eq(l+6).html()===i.eq(l+12).html()&&i.eq(l+12).html()===i.eq(l+18).html()||i.eq(l).html()===i.eq(l+8).html()&&i.eq(l+8).html()===i.eq(l+16).html()&&i.eq(l+16).html()===i.eq(l+24).html())&&o(v,b,M),console.log(Math.floor(l/7),Math.floor((l-3)/7),Math.floor((l+3)/7)),Math.floor(l/7)!==Math.floor((l-3)/7)&&Math.floor(l/7)!==Math.floor((l+3)/7)||function(){console.log("checking horizontal win");for(var n=7*Math.floor(l/7)+6,e=0;n>=7*Math.floor(l/7)+3;){if([0,-1,-2,-3].forEach(function(o){console.log(r%2==0?"O":"X"),i.eq(n+o).html()===(r%2==0?"O":"X")&&e++}),4===e){o(w,b,y);break}n--,e=0}}()}(t),a.src="sounds/boing1.wav",a.play()}u.on("click",function(o){i.html(" "),i.css("background","transparent")})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwidmljdG9yeSIsIkEiLCJCIiwiQyIsImNvbnNvbGUiLCJzcGVhayIsInJlc3BvbnNpdmVWb2ljZSIsIiRhdWRpbzIiLCJzcmMiLCIkYXVkaW8iLCJodG1sIiwiJHBsYXllckRpc3BsYXkiLCJjaGFuZ2VCYWNrZ3JvdW5kIiwiRCIsImxvZyIsIiRzdGFydGdhbWUiLCIkYXVkaW8xIiwicHJvbXB0IiwiYXNrUGxheWVyTmFtZTEiLCJhc2tQbGF5ZXJOYW1lMiIsIiRjZWxscyIsInR1cm5Db3VudGVyIiwiJHJlc2V0QnV0dG9uIiwiJHN0b3BNdXNpYyIsIiRzdW5CYWNrZ3JvdW5kIiwiJHRyb25CYWNrZ3JvdW5kIiwiJHRyaWFuZ2xlQmFja2dyb3VuZCIsIiRib2R5IiwidldpbiIsIndpblNvdW5kIiwidldpbkJhY2tncm91bmQiLCJoV2luIiwiaFdpbkJhY2tncm91bmQiLCJ0cm9uQmdGaWxlIiwidHJpYW5nbGVCZ0ZpbGUiLCIkZ2FtZVNldHVwQnV0dG9uIiwib24iLCJlIiwic2xpZGVEb3duIiwiJGJhY2tncm91bmRPcHRpb25zQnV0dG9uIiwicGxheSIsInBhdXNlIiwiZFdpbkJhY2tncm91bmQiLCJpbmRleCIsInRhcmdldCIsImNzcyIsImNvbG9yIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNoZWNrRm9yV2luIiwiZXEiLCJkV2luIiwiTWF0aCIsImZsb29yIiwidG9wT2ZSb3ciLCJzdHJlYWsiLCJmb3JFYWNoIiwiaSJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FrQ0EsUUFBU0MsR0FBU0MsRUFBRUMsRUFBRUMsR0FBdEJDLFFBQVNKLElBQVQsR0FBa0JDLEdBQ2hCRyxnQkFBQUMsTUFBQUQsR0FBQUgsR0FDQUssRUFBQUEsSUFBQUEsVUFBQUosRUFBQUksT0FDQUMsRUFBUUMsT0FDUkQsRUFBQUEsUUFDQUUsRUFBQUMsS0FBQUQsR0FBQVIsR0FDQVUsRUFBQUEsSUFBQUEsbUJBQUFBLGtCQUFBUixFQUFBUSxLQUlGLFFBQVNDLEdBQWtCQyxHQUEzQlQsUUFBU1EsSUFBQUEsc0JBQ1BSLEVBQUFBLElBQVFVLG1CQUFSVixrQkFBQVMsRUFBQVQsS0E1Q0ZBLFFBQVFVLElBQUksZUFFWixJQUFBQyxHQUFBaEIsRUFBQSxjQUdNVSxFQUFTVixFQUFFLG9CQUFvQixHQUQvQmdCLEVBQUFBLEVBQWFoQixlQUFuQixHQUNNVSxFQUFXVixFQUFBLGFBQUEsR0FDWGlCLEVBQVlDLE9BQUYsb0NBQ1ZWLEVBQVlVLE9BQUYsb0NBQ1ZDLEVBQUFBLEVBQUFBLFNBQ0FDLEVBQUFBLEtBQ0FDLEVBQVdyQixFQUFqQixVQUNJc0IsRUFBY3RCLEVBQUEsY0FDWnVCLEVBQWlCdkIsRUFBQSxrQkFDakJ3QixFQUFleEIsRUFBQSxtQkFDZnlCLEVBQW1CekIsRUFBQSx1QkFDbkIwQixFQUFBQSxFQUFBQSxRQUNBQyxFQUFBQSxFQUFBQSxrQkFDQUMsRUFBUTVCLGVBQ1JZLEVBQUFBLE1BQ0FpQixFQUFPLFdBQ1BDLEVBQUFBLGlCQUNBQyxFQUFpQixlQUNqQkMsRUFBTyxlQUNQQyxFQUFpQixrQkFJakJDLEVBQWFsQyxFQUFBLHNCQUNibUMsRUFBaUJuQyxFQUFBLDZCQW9CdkJvQyxHQUFBQyxHQUFBLFFBQUEsU0FBQUMsR0FDQUYsRUFBQUEsVUFBb0IsS0FDbEJwQixFQUFXdUIsVUFBVSxLQUNyQmYsRUFBV2UsVUFBVSxPQU12QkMsRUFBeUJILEdBQUcsUUFBUyxTQUFBQyxHQUNuQ2IsRUFBZWMsVUFBVSxLQUN6QmIsRUFBZ0JhLFVBQVUsS0FDMUJaLEVBQW9CWSxVQUFVLE9BVzlCN0IsRUFBTytCLEdBQVAsUUFBQSxTQUFBSCxHQUNBL0IsUUFBQUEsSUFBQUEsV0FKRkcsRUFBQUQsSUFBQSx3QkFHRUMsRUFBTytCLE9BSVRsQyxnQkFBQUQsTUFBQSxTQUFBYSxFQUFBLFFBQUFDLEVBQUEsNENBS0NJLEVBSERhLEdBQUEsUUFBQSxTQUFBQyxHQUNFakMsUUFBUVUsSUFBSSxlQUlkTCxFQUFBZ0MsVUFFQWpCLEVBQWVZLEdBQUcsUUFBUyxXQUk3QnhCLEVBaEVlLHVCQWtFYmEsRUFBZ0JXLEdBQUcsUUFBUyxXQUk5QnhCLEVBckVROEIsdUJBdUVOaEIsRUFBb0JVLEdBQUcsUUFBUyxXQUtoQ3hCLEVBM0VrQix1QkFrRmRRLEVBQUFnQixHQUFNTyxRQUFVTixTQUFFTyxHQUNsQjdDLEdBQUk2QyxHQUFRbEMsRUFBWixHQUFBLEVBQUEsVUFBQSxVQUNJa0MsRUFBUUMsRUFBSSxHQUFoQixFQUFvQ0MsSUFBcEMsR0FDQS9DLElBQUVzQyxFQUFFTyxFQUFBQSxRQUFRRyxTQUFaLFlBQUEsQ0FDQWhELEdBQUk2QyxHQUFRSSxFQUFBQSxFQUFBQSxRQUFTTCxPQUNyQnZCLEdBQUFBLEVBQUFBLFFBQVV1QixLQUFBQSxHQUNWdEIsRUFBQUEsRUFBQUEsUUFBQUEsSUFBQUEsbUJBQUFBLEdBQ0E0QixFQUFBQSxFQUFBQSxRQUFZTixZQUFaLFlBQ0EzQixFQUFBQSxFQUFBQSxRQUFBZ0MsU0FBYyxlQUNkaEMsRUFBQUEsR0FBUXdCLEVBQVIsR0FBQU8sWUFBQSxlQUFBQyxTQUFBLFlBQ0QzQixJQWtCQyxTQUFBc0IsR0FLRTNDLFFBQUFBLElBQVE0QixRQUFLQyxFQUFTQyxFQUFBQSxHQUFBQSxFQUF0QixJQUhFVixFQUFPOEIsR0FBR1AsR0FBT2pDLFNBQVdVLEVBQU84QixHQUFHUCxFQUFNLEdBQUdqQyxRQVNuRFUsRUFBSUEsR0FBQUEsRUFBVXVCLEdBQVZqQyxTQUFBVSxFQUE0QkEsR0FBTzhCLEVBQUdQLElBQU1qQyxRQU85Q1YsRUFBQUEsR0FBUW1ELEVBQUt0QixJQUFBQSxTQUFTYSxFQUFBQSxHQUF0QkMsRUFBQSxJQUFBakMsUUFDRFYsRUFBQTRCLEVBQUFDLEVBQUFDLElBTUdzQixFQUFLQyxHQUFMVixHQUFXQSxTQUFhUyxFQUFLQyxHQUFPVixFQUFBQSxHQUFEakMsUUFBZ0VVLEVBQUE4QixHQUFBUCxFQUFBLEdBQUFqQyxTQUFBVSxFQUFBOEIsR0FBQVAsRUFBQSxJQUFBakMsUUFDckdOLEVBQUFBLEdBQUFBLEVBQVksSUFBQU0sU0FBQVUsRUFBQThCLEdBQVpQLEVBQUEsSUFBQWpDLFFBRUFVLEVBQUE4QixHQUFJSSxHQUFBQSxTQUFnQkQsRUFBTVYsR0FBTUEsRUFBakIsR0FBMEJqQyxRQUN6Q1UsRUFBQThCLEdBQUlLLEVBQUFBLEdBQUo3QyxTQUFBVSxFQUFBOEIsR0FBQVAsRUFBQSxJQUFBakMsUUFaRlUsRUFBTzhCLEdBQUdQLEVBQU0sSUFBSWpDLFNBQVdVLEVBQU84QixHQUFHUCxFQUFNLElBQUlqQyxTQWNqRFYsRUFBQW1ELEVBQU1HLEVBQVlGLEdBS1pHLFFBQUFBLElBQUFBLEtBQUFBLE1BQUFBLEVBQUFBLEdBQUFBLEtBQUFBLE9BQUFBLEVBQUFBLEdBQUFBLEdBQUFBLEtBQUFBLE9BQUFBLEVBQUFBLEdBQUFBLElBRUhILEtBTERDLE1BQUFWLEVBQUEsS0FBQVMsS0FBQUMsT0FBQVYsRUFBQSxHQUFBLElBQUFTLEtBQUFDLE1BQUFWLEVBQUEsS0FBQVMsS0FBQUMsT0FBQVYsRUFBQSxHQUFBLElBQUEsV0FQRnZDLFFBQVFVLElBQUksMEJBS1osS0FVSWQsR0FBQUEsR0FBc0JnQyxFQUFkRCxLQUFLRixNQUFBQSxFQUFTRyxHQUFBQSxFQUN0QnVCLEVBQUEsRUFYRUQsR0FBa0MsRUFBdEJGLEtBQUtDLE1BQU1WLEVBQU0sR0FBUyxHQUFHLENBUzdDLElBTUFZLEdBQUFBLEdBQUFBLEdBQUFBLEdBQUFDLFFBQUEsU0FBQUMsR0FFRHJELFFBQUFVLElBQUFPLEVBQUEsR0FBQSxFQUFBLElBQUEsS0F2Qm9HRCxFQUFBOEIsR0FBQUksRUFBQUcsR0FBQS9DLFVBQUFXLEVBQUEsR0FBQSxFQUFBLElBQUEsTUF5QnRHa0MsTUFWaUIsSUFBWEEsRUFBYyxDQUNmdkQsRUFBUStCLEVBQUtGLEVBQVNHLEVBQ3RCLE9BR0ZzQixJQUNBQyxFQUFTLE9BbkVEWixHQUtkM0IsRUFBQVIsSUFBQSxvQkFIRVEsRUFBUXdCLE9BS1ZsQixFQUFhYyxHQUFHLFFBQVMsU0FBQ0MsR0FNMUJqQixFQUFBVixLQUFBLEtBSkVVLEVBQU95QixJQUFJLGFBQWMiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdXb29ob28hISEhISEnKTtcblxuICAvLyBDT05TVEFOVFMgRVRDIC8vXG5cbiAgY29uc3QgJHN0YXJ0Z2FtZSA9ICQoJyNzdGFydGdhbWUnKTtcbiAgY29uc3QgJGF1ZGlvID0gJCgnI2F1ZGlvYmFja2dyb3VuZCcpWzBdO1xuICBjb25zdCAkYXVkaW8xID0gJCgnI2F1ZGlvY2xpY2snKVswXTtcbiAgY29uc3QgJGF1ZGlvMiA9ICQoJyNhdWRpb3dpbicpWzBdO1xuICBjb25zdCBhc2tQbGF5ZXJOYW1lMSA9IHByb21wdCgnUGxheWVyIDEgcGxlYXNlIGVudGVyIHlvdXIgbmFtZT8nKTtcbiAgY29uc3QgYXNrUGxheWVyTmFtZTIgPSBwcm9tcHQoJ1BsYXllciAyIHBsZWFzZSBlbnRlciB5b3VyIG5hbWU/Jyk7XG4gIGNvbnN0ICRjZWxscyA9ICQoJy5jZWxsJyk7XG4gIGxldCB0dXJuQ291bnRlciA9IG51bGw7XG4gIGNvbnN0ICRyZXNldEJ1dHRvbiA9ICQoJyNyZXNldCcpO1xuICBjb25zdCAkc3RvcE11c2ljID0gJCgnI3N0b3BtdXNpYycpO1xuICBjb25zdCAkc3VuQmFja2dyb3VuZCA9ICQoJyNzdW5iYWNrZ3JvdW5kJyk7XG4gIGNvbnN0ICR0cm9uQmFja2dyb3VuZCA9ICQoJyN0cm9uYmFja2dyb3VuZCcpO1xuICBjb25zdCAkdHJpYW5nbGVCYWNrZ3JvdW5kID0gJCgnI3RyaWFuZ2xlYmFja2dyb3VuZCcpO1xuICBjb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcbiAgY29uc3QgJHBsYXllckRpc3BsYXkgPSAkKCcucGxheWVyZGlzcGxheScpO1xuICBjb25zdCB2V2luID0gJ3ZlcnRpY2FsIHdpbic7XG4gIGNvbnN0IHdpblNvdW5kID0gJ3dpbic7XG4gIGNvbnN0IHZXaW5CYWNrZ3JvdW5kID0gJ3RhY28uZ2lmJztcbiAgY29uc3QgaFdpbiA9ICdob3Jpem9udGFsIHdpbic7XG4gIGNvbnN0IGhXaW5CYWNrZ3JvdW5kID0gJ21hbmRhbmNlLmdpZic7XG4gIGNvbnN0IGRXaW4gPSAnZGlhZ29uYWwgd2luJztcbiAgY29uc3QgZFdpbkJhY2tncm91bmQgPSAnY2VsZWJyYXRpb24uZ2lmJztcbiAgY29uc3Qgc3VuQmdGaWxlID0gJ3N1bmJhY2tncm91bmQuZ2lmJztcbiAgY29uc3QgdHJvbkJnRmlsZSA9ICd0cm9ud2FsbHBhcGVyLnBuZyc7XG4gIGNvbnN0IHRyaWFuZ2xlQmdGaWxlID0gJ2xhc2VydHJpYW5nbGUuZ2lmJztcbiAgY29uc3QgJGdhbWVTZXR1cEJ1dHRvbiA9ICQoJyNnYW1lX3NldHVwX2J1dHRvbicpO1xuICBjb25zdCAkYmFja2dyb3VuZE9wdGlvbnNCdXR0b24gPSAkKCcjYmFja2dyb3VuZF9vcHRpb25zX2J1dHRvbicpO1xuXG5cbiAgZnVuY3Rpb24gdmljdG9yeSAoQSxCLEMpIHtcbiAgICBjb25zb2xlLmxvZyhgJHtBfWApO1xuICAgIHJlc3BvbnNpdmVWb2ljZS5zcGVhayhgJHtBfWApO1xuICAgICRhdWRpbzIuc3JjID0gYHNvdW5kcy8ke0J9LndhdmA7XG4gICAgJGF1ZGlvMi5wbGF5KCk7XG4gICAgJGF1ZGlvLnBhdXNlKCk7XG4gICAgJHBsYXllckRpc3BsYXkuaHRtbChgJHtBfWApO1xuICAgICRib2R5LmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwocHVibGljL2Nzcy8ke0N9KWApO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhbmdlQmFja2dyb3VuZCAoRCkge1xuICAgIGNvbnNvbGUubG9nKCdjaGFuZ2UgYmFja2dyb3VuZCEnKTtcbiAgICAkYm9keS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCBgdXJsKHB1YmxpYy9jc3MvJHtEfSlgKTtcbiAgfVxuXG4gIC8vIEdBTUUgU0VUVVAgRFJPUERPV04gLy9cbiAgJGdhbWVTZXR1cEJ1dHRvbi5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgICRzdGFydGdhbWUuc2xpZGVEb3duKDIwMCk7XG4gICAgJHN0b3BNdXNpYy5zbGlkZURvd24oMjAwKTtcbiAgICAkcmVzZXRCdXR0b24uc2xpZGVEb3duKDIwMCk7XG5cbiAgfSk7XG5cbiAgLy8gQkFDS0dST1VORCBPUFRJT05TIERST1BET1dOIC8vXG4gICRiYWNrZ3JvdW5kT3B0aW9uc0J1dHRvbi5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgICRzdW5CYWNrZ3JvdW5kLnNsaWRlRG93bigyMDApO1xuICAgICR0cm9uQmFja2dyb3VuZC5zbGlkZURvd24oMjAwKTtcbiAgICAkdHJpYW5nbGVCYWNrZ3JvdW5kLnNsaWRlRG93bigyMDApO1xuXG4gIH0pO1xuXG5cblxuICAvLyBTVEFSVCBHQU1FIEJVVFRPTiAvL1xuXG4gICRzdGFydGdhbWUub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zb2xlLmxvZygnY2xpY2tlZCcpO1xuICAgICRhdWRpby5zcmMgPSAnc291bmRzL2FyY2FkZWZ1bmsubXAzJztcbiAgICAkYXVkaW8ucGxheSgpO1xuICAgIHJlc3BvbnNpdmVWb2ljZS5zcGVhayhgSGVsbG8gJHthc2tQbGF5ZXJOYW1lMX0gYW5kICR7YXNrUGxheWVyTmFtZTJ9ICBhbmQgd2VsY29tZSB0byBmdW5reSBsYXNlciBjb25uZWN0IDRgKTtcbiAgfSk7XG5cbiAgLy9TVE9QIE1VU0lDIEJVVFRPTi8vXG5cbiAgJHN0b3BNdXNpYy5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdzdG9wIG11c2ljIScpO1xuICAgICRhdWRpby5wYXVzZSgpO1xuICB9KTtcblxuICAvL1NVTiBCQUNLR1JPVU5EIEJVVFRPTi8vXG5cbiAgJHN1bkJhY2tncm91bmQub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNoYW5nZUJhY2tncm91bmQoc3VuQmdGaWxlKTtcbiAgfSk7XG5cbi8vVFJPTiBCQUNLR1JPVU5EIEJVVFRPTi8vXG5cbiAgJHRyb25CYWNrZ3JvdW5kLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjaGFuZ2VCYWNrZ3JvdW5kKHRyb25CZ0ZpbGUpO1xuICB9KTtcblxuLy9UUklBTkdMRSBCQUNLR1JPVU5EIEJVVFRPTi8vXG5cbiAgJHRyaWFuZ2xlQmFja2dyb3VuZC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgY2hhbmdlQmFja2dyb3VuZCh0cmlhbmdsZUJnRmlsZSk7XG4gIH0pO1xuXG5cbiAgLy8gQ0xJQ0sgT04gU1FVQVJFOiBQVVRTIFggT1IgTyBJTiBTUVVBUkUsIENIQU5HRVMgQ09MT1IsICBBRERTIDEgVE8gVFVSTiBDT1VOVEVSLCBNQUtFUyBTUVVBUkUgVU5QTEFZQUJMRSAoQ0FOJ1QgUExBQ0UgQU5PVEhFUiBQSUVDRSBPTiBTUVVBUkUpIEFORCBNQUtFUyBTUVVBUkUgQUJPVkUgUExBWUFCTEVcblxuXG4gICRjZWxscy5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnN0IGNvbG9yID0gdHVybkNvdW50ZXIgJSAyID09PSAwID8gJyMwMEZGRkYnIDogJyNGRjAwQ0MnO1xuICAgIGNvbnN0IGNvdW50ZXIgPSB0dXJuQ291bnRlciAlIDIgPT09IDAgPyAnWCcgOiAnTyc7XG4gICAgaWYgKCQoZS50YXJnZXQpLmhhc0NsYXNzKCdwbGF5YWJsZScpKSB7XG4gICAgICBjb25zdCBpbmRleCA9ICQoZS50YXJnZXQpLmluZGV4KCk7XG4gICAgICAkKGUudGFyZ2V0KS5odG1sKGNvdW50ZXIpO1xuICAgICAgJChlLnRhcmdldCkuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgY29sb3IpO1xuICAgICAgJChlLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3BsYXlhYmxlJyk7XG4gICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcygnbm90cGxheWFibGUnKTtcbiAgICAgICRjZWxscy5lcShpbmRleCAtNykucmVtb3ZlQ2xhc3MoJ25vdHBsYXlhYmxlJykuYWRkQ2xhc3MoJ3BsYXlhYmxlJyk7XG4gICAgICB0dXJuQ291bnRlcisrO1xuICAgICAgY2hlY2tGb3JXaW4oaW5kZXgpO1xuICAgICAgJGF1ZGlvMS5zcmMgPSAnc291bmRzL2JvaW5nMS53YXYnO1xuICAgICAgJGF1ZGlvMS5wbGF5KCk7XG4gICAgfVxuXG4gICAgLy8gUkVTRVQgQlVUVE9OIC0gU0VUUyBBTEwgSFRNTCBJTiBDRUxMUyBUTyBOT1RISU5HIEFORCBDSEFOR0VTIEFMTCBCQUNLR1JPVU5EIFRPIFRSQU5TUEFSRU5UIC8vXG5cbiAgICAkcmVzZXRCdXR0b24ub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICRjZWxscy5odG1sKCcgJyk7XG4gICAgICAkY2VsbHMuY3NzKCdiYWNrZ3JvdW5kJywgJ3RyYW5zcGFyZW50Jyk7XG4gICAgfSk7XG5cblxuICAgIC8vIFdJTiBDT05ESVRJT05TIC8vXG5cblxuICAgIGZ1bmN0aW9uIGNoZWNrRm9yV2luKGluZGV4KSB7XG4gICAgICAvLyBWRVJUSUNBTCBXSU4gQ0hFQ0sgLSBBUyBZT1UgQ0xJQ0sgVE8gUExBQ0UgWU9VUiBDT0xPVVIsIENIRUNLUyBGT1IgTUFUQ0hJTkcgQ09MT1VSUyBJTiBUSEUgU1FVQVJFUyBCRUxPVywgQUNISUVWRUQgQlkgQURESU5HIFRIRSBXSURUSCBPRkcgVEhFIEJPQVJEICg3KSBUTyBUSEUgSU5ERVggTlVNQkVSIE9GIFRIRSBTUVVBUkUgWU9VIENMSUNLRUQgT04vL1xuXG4gICAgICBjb25zb2xlLmxvZygnaW5kZXgnLCBpbmRleCwgJGNlbGxzLmVxKGluZGV4KzcpKTtcblxuICAgICAgLy8gY29uc3QgY3VycmVudEluZGV4ID0gJChlLnRhcmdldCkuaW5kZXgoKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCRjZWxscy5lcShpbmRleCs3KS5odG1sKCkpO1xuICAgICAgaWYgKCRjZWxscy5lcShpbmRleCkuaHRtbCgpID09PSAkY2VsbHMuZXEoaW5kZXgrNykuaHRtbCgpICYmXG4gICAgICAkY2VsbHMuZXEoaW5kZXgrNykuaHRtbCgpID09PSAkY2VsbHMuZXEoaW5kZXgrMTQpLmh0bWwoKSAmJlxuICAgICAgJGNlbGxzLmVxKGluZGV4KzE0KS5odG1sKCkgPT09ICRjZWxscy5lcShpbmRleCsyMSkuaHRtbCgpKSB7XG4gICAgICAgIHZpY3Rvcnkodldpbix3aW5Tb3VuZCx2V2luQmFja2dyb3VuZCk7XG4gICAgICB9XG5cblxuICAgICAgLy8gRElBR09OQUwgV0lOIENIRUNLLSBESUFHT05BTCBTUVVBUkVTIEFSRSBPTiBUSEUgV0lEVEggT0YgVEhFIEJPQVJEICg3KSBQTFVTIE9SIE1JTlVTIE9ORS4gQVMgWU9VIEdPIFZFUlRJQ0FMTFkgVVAgVEhFIEJPQVJEIFdISUxFIFBMQVlJTkcsIFRIRSBJTkRFWCBPRiBUSEUgU1FVQVJFIFlPVSBDTElDSyBPTiBXSUxMIEJFIExPV0VSLCBUSEVSRUZPUkUgV0UgTkVFRCBUTyBDSEVDSyBUSEUgU1FVQVJFUyBGVVJUSEVSIFVQIFRIRSBJTkRFWCwgSEVOQ0UgVEhFIENIRUNLUyBBUkUgUE9TSVRJVkUgSU4gRUlUSEVSIE1VTFRJUExFUyBPRiA2KDctMSkgT1IgOCg3KzEpLlxuXG4gICAgICBpZiAoJGNlbGxzLmVxKGluZGV4KS5odG1sKCkgPT09ICRjZWxscy5lcShpbmRleCs2KS5odG1sKCkgJiZcbiAgICAgICRjZWxscy5lcShpbmRleCs2KS5odG1sKCkgPT09ICRjZWxscy5lcShpbmRleCsxMikuaHRtbCgpICYmXG4gICAgICAkY2VsbHMuZXEoaW5kZXgrMTIpLmh0bWwoKSA9PT0gJGNlbGxzLmVxKGluZGV4KzE4KS5odG1sKClcbiAgICAgIHx8XG4gICAgICAkY2VsbHMuZXEoaW5kZXgpLmh0bWwoKSA9PT0gJGNlbGxzLmVxKGluZGV4KzgpLmh0bWwoKSAmJlxuICAgICAgJGNlbGxzLmVxKGluZGV4KzgpLmh0bWwoKSA9PT0gJGNlbGxzLmVxKGluZGV4KzE2KS5odG1sKCkgJiZcbiAgICAgICRjZWxscy5lcShpbmRleCsxNikuaHRtbCgpID09PSAkY2VsbHMuZXEoaW5kZXgrMjQpLmh0bWwoKSkge1xuICAgICAgICB2aWN0b3J5KGRXaW4sd2luU291bmQsZFdpbkJhY2tncm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvLyBIT1JJWk9OVEFMIFdJTiBDSEVDSyAtIENIRUNLUyBUTyBTRUUgV0hFVEhFUiBDRUxMUyBBUkUgSU4gVEhFIFNBTUUgUk9XIEJZIFRBS0lORyBUSEUgTUFUSC5GTE9PUiBPRiBUSEUgSU5ERVggTlVNQkVSIE9WRVIgVEhFIFdJRFRIIE9GIFRIRSBCT0FSRCAoNykuIEZJTkRTIFRPUCBPRiBUSEUgUkVMRVZBTlQgUk9XIEJZIEFERElORyA2IFRPIFRIRSBNQVRILkZMT09SIE9GIFRIRSBDRUxMIElOREVYIC8gNy4gU1RBUlRTIExPT1AgQVQgVE9QIE9GIFJPVyBMT09LSU5HIEZPUiBTRVFVRU5USUFMIE1BVENIRVMgSU4gVEhFIENFTExTLCBJRiBJVCBGSU5EUyBPTkUsIFRIRSBTVFJFQUsgQ09VTlRFUiBBRERTIDEuIEhPUklaT05UQUwgV0lOIEFOTk9VTkNFUyBXSEVOIFNUUkVBSyBISVRTIDQuXG5cbiAgICAgIGNvbnNvbGUubG9nKE1hdGguZmxvb3IoaW5kZXgvNyksIE1hdGguZmxvb3IoKGluZGV4LTMpLzcpLCBNYXRoLmZsb29yKChpbmRleCszKS83KSk7XG5cbiAgICAgIGlmIChNYXRoLmZsb29yKGluZGV4LzcpID09PSBNYXRoLmZsb29yKChpbmRleC0zKS83KSB8fCBNYXRoLmZsb29yKGluZGV4LzcpID09PSBNYXRoLmZsb29yKChpbmRleCszKS83KSl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjaGVja2luZyBob3Jpem9udGFsIHdpbicpO1xuICAgICAgICAvLyBmaW5kIHRvcCBvZiBST1dcbiAgICAgICAgbGV0IHRvcE9mUm93ID0gTWF0aC5mbG9vcihpbmRleC83KSAqIDcgKyA2O1xuICAgICAgICBsZXQgc3RyZWFrICA9IDA7XG5cbiAgICAgICAgd2hpbGUodG9wT2ZSb3cgPj0gTWF0aC5mbG9vcihpbmRleC83KSAqIDcgKyAzKSB7XG4gICAgICAgICAgLy8gY2hlY2sgNCBmcm9tIHN0YXJ0IG9mIFJPV1xuICAgICAgICAgIFswLC0xLC0yLC0zXS5mb3JFYWNoKChpKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygodHVybkNvdW50ZXIgJSAyID09PSAwID8gJ08nIDogJ1gnKSk7XG4gICAgICAgICAgICBpZigkY2VsbHMuZXEodG9wT2ZSb3cgKyBpKS5odG1sKCkgPT09ICh0dXJuQ291bnRlciAlIDIgPT09IDAgPyAnTycgOiAnWCcpKSB7XG4gICAgICAgICAgICAgIHN0cmVhaysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYoc3RyZWFrID09PSA0KSB7XG4gICAgICAgICAgICB2aWN0b3J5KGhXaW4sd2luU291bmQsaFdpbkJhY2tncm91bmQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdG9wT2ZSb3ctLTtcbiAgICAgICAgICBzdHJlYWsgPSAwO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgfVxuICB9KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cbn0pO1xuIl19
