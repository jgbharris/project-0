"use strict";$(function(){function o(o,l,n){console.log(""+o),responsiveVoice.speak(""+o),t.src="sounds/"+l+".wav",t.play(),e.pause(),p.html(""+o),f.css("background-image","url(public/css/"+n+")")}function l(o){console.log("change background!"),f.css("background-image","url(public/css/"+o+")")}console.log("Woohoo!!!!!!");var n=$("#startgame"),e=$("#audiobackground")[0],a=$("#audioclick")[0],t=$("#audiowin")[0],c=prompt("Player 1 please enter your name?"),s=prompt("Player 2 please enter your name?"),i=$(".cell"),r=null,u=$("#reset"),g=$("#stopmusic"),m=$("#sunbackground"),d=$("#tronbackground"),h=$("#trianglebackground"),f=$("body"),p=$(".playerdisplay"),b="vertical win",k="win",q="taco.gif",y="horizontal win",w="mandance.gif",v="diagonal win",C="celebration.gif",M=$("#game_setup_button"),D=$("#background_options_button");M.on("click",function(o){n.slideDown(200),g.slideDown(200),u.slideDown(200)}),D.on("click",function(o){m.slideDown(200),d.slideDown(200),h.slideDown(200)}),n.on("click",function(o){console.log("clicked"),e.src="sounds/arcadefunk.mp3",e.play(),responsiveVoice.speak("Hello "+c+" and "+s+", welcome to funky laser connect 4, I am the game master, begin!")}),g.on("click",function(o){console.log("stop music!"),e.pause()}),u.on("click",function(o){i.html(""),p.html("win display"),i.css("background","transparent"),i.addClass("notplayable"),[35,36,37,38,39,40,41].forEach(function(o){i.eq(o).removeClass("notplayable").addClass("playable")}),l("lasertriangle.gif")}),m.on("click",function(){l("sunbackground.gif")}),d.on("click",function(){l("tronwallpaper.png")}),h.on("click",function(){l("lasertriangle.gif")}),i.on("click",function(l){var n=r%2==0?"#00FFFF":"#FF00CC",e=r%2==0?"X":"O";if($(l.target).hasClass("playable")){var t=$(l.target).index();$(l.target).html(e),$(l.target).css("background-color",n),$(l.target).removeClass("playable"),$(l.target).addClass("notplayable"),i.eq(t-7).removeClass("notplayable").addClass("playable"),r++,function(l){console.log("index",l,i.eq(l+7)),i.eq(l).html()===i.eq(l+7).html()&&i.eq(l+7).html()===i.eq(l+14).html()&&i.eq(l+14).html()===i.eq(l+21).html()&&o(b,k,q),(i.eq(l).html()===i.eq(l+6).html()&&i.eq(l+6).html()===i.eq(l+12).html()&&i.eq(l+12).html()===i.eq(l+18).html()||i.eq(l).html()===i.eq(l+8).html()&&i.eq(l+8).html()===i.eq(l+16).html()&&i.eq(l+16).html()===i.eq(l+24).html())&&o(v,k,C),console.log(Math.floor(l/7),Math.floor((l-3)/7),Math.floor((l+3)/7)),Math.floor(l/7)!==Math.floor((l-3)/7)&&Math.floor(l/7)!==Math.floor((l+3)/7)||function(){console.log("checking horizontal win");for(var n=7*Math.floor(l/7)+6,e=0;n>=7*Math.floor(l/7)+3;){if([0,-1,-2,-3].forEach(function(o){console.log(r%2==0?"O":"X"),i.eq(n+o).html()===(r%2==0?"O":"X")&&e++}),4===e){o(y,k,w);break}n--,e=0}}()}(t),a.src="sounds/boing1.wav",a.play()}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwidmljdG9yeSIsIkEiLCJCIiwiQyIsImNvbnNvbGUiLCJzcGVhayIsInJlc3BvbnNpdmVWb2ljZSIsIiRhdWRpbzIiLCJzcmMiLCIkYXVkaW8iLCJodG1sIiwiJHBsYXllckRpc3BsYXkiLCJjaGFuZ2VCYWNrZ3JvdW5kIiwiRCIsImxvZyIsIiRzdGFydGdhbWUiLCIkYXVkaW8xIiwicHJvbXB0IiwiYXNrUGxheWVyTmFtZTEiLCJhc2tQbGF5ZXJOYW1lMiIsIiRjZWxscyIsInR1cm5Db3VudGVyIiwiJHJlc2V0QnV0dG9uIiwiJHN0b3BNdXNpYyIsIiRzdW5CYWNrZ3JvdW5kIiwiJHRyb25CYWNrZ3JvdW5kIiwiJHRyaWFuZ2xlQmFja2dyb3VuZCIsIiRib2R5IiwidldpbiIsIndpblNvdW5kIiwidldpbkJhY2tncm91bmQiLCJoV2luIiwiaFdpbkJhY2tncm91bmQiLCJ0cm9uQmdGaWxlIiwidHJpYW5nbGVCZ0ZpbGUiLCIkZ2FtZVNldHVwQnV0dG9uIiwib24iLCJlIiwic2xpZGVEb3duIiwiJGJhY2tncm91bmRPcHRpb25zQnV0dG9uIiwicGxheSIsInBhdXNlIiwiYWRkQ2xhc3MiLCJpbmRpY2VzIiwiZm9yRWFjaCIsImluZGV4IiwiZXEiLCJyZW1vdmVDbGFzcyIsImRXaW5CYWNrZ3JvdW5kIiwidGFyZ2V0IiwiY2hlY2tGb3JXaW4iLCJjb3VudGVyIiwiY3NzIiwiY29sb3IiLCJ0b3BPZlJvdyIsIk1hdGgiLCJzdHJlYWsiLCJmbG9vciIsImkiXSwibWFwcGluZ3MiOiJZQUFBQSxHQUFFLFdBa0NBLFFBQVNDLEdBQVNDLEVBQUVDLEVBQUVDLEdBQXRCQyxRQUFTSixJQUFULEdBQWtCQyxHQUNoQkcsZ0JBQUFDLE1BQUFELEdBQUFILEdBQ0FLLEVBQUFBLElBQUFBLFVBQUFKLEVBQUFJLE9BQ0FDLEVBQVFDLE9BQ1JELEVBQUFBLFFBQ0FFLEVBQUFDLEtBQUFELEdBQUFSLEdBQ0FVLEVBQUFBLElBQUFBLG1C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QUFBLEtBOUVIRCxFQUFBMEIsR0FBQVEsRUFBQUksR0FBQWhELFVBQUFXLEVBQUEsR0FBQSxFQUFBLElBQUEsTUFuSEZtQyxNQXFMd0IsSUFBWEEsRUFBYyxDQUNmeEQsRUFBUStCLEVBQUtGLEVBQVNHLEVBQ3RCLE9BR0ZzQixJQUNBRSxFQUFTLE9BN0REWCxHQUNaN0IsRUFBUVIsSUFBTSxvQkFTaEJRLEVBQVNrQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgY29uc29sZS5sb2coJ1dvb2hvbyEhISEhIScpO1xuXG4gIC8vIENPTlNUQU5UUyBFVEMgLy9cblxuICBjb25zdCAkc3RhcnRnYW1lID0gJCgnI3N0YXJ0Z2FtZScpO1xuICBjb25zdCAkYXVkaW8gPSAkKCcjYXVkaW9iYWNrZ3JvdW5kJylbMF07XG4gIGNvbnN0ICRhdWRpbzEgPSAkKCcjYXVkaW9jbGljaycpWzBdO1xuICBjb25zdCAkYXVkaW8yID0gJCgnI2F1ZGlvd2luJylbMF07XG4gIGNvbnN0IGFza1BsYXllck5hbWUxID0gcHJvbXB0KCdQbGF5ZXIgMSBwbGVhc2UgZW50ZXIgeW91ciBuYW1lPycpO1xuICBjb25zdCBhc2tQbGF5ZXJOYW1lMiA9IHByb21wdCgnUGxheWVyIDIgcGxlYXNlIGVudGVyIHlvdXIgbmFtZT8nKTtcbiAgY29uc3QgJGNlbGxzID0gJCgnLmNlbGwnKTtcbiAgbGV0IHR1cm5Db3VudGVyID0gbnVsbDtcbiAgY29uc3QgJHJlc2V0QnV0dG9uID0gJCgnI3Jlc2V0Jyk7XG4gIGNvbnN0ICRzdG9wTXVzaWMgPSAkKCcjc3RvcG11c2ljJyk7XG4gIGNvbnN0ICRzdW5CYWNrZ3JvdW5kID0gJCgnI3N1bmJhY2tncm91bmQnKTtcbiAgY29uc3QgJHRyb25CYWNrZ3JvdW5kID0gJCgnI3Ryb25iYWNrZ3JvdW5kJyk7XG4gIGNvbnN0ICR0cmlhbmdsZUJhY2tncm91bmQgPSAkKCcjdHJpYW5nbGViYWNrZ3JvdW5kJyk7XG4gIGNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xuICBjb25zdCAkcGxheWVyRGlzcGxheSA9ICQoJy5wbGF5ZXJkaXNwbGF5Jyk7XG4gIGNvbnN0IHZXaW4gPSAndmVydGljYWwgd2luJztcbiAgY29uc3Qgd2luU291bmQgPSAnd2luJztcbiAgY29uc3QgdldpbkJhY2tncm91bmQgPSAndGFjby5naWYnO1xuICBjb25zdCBoV2luID0gJ2hvcml6b250YWwgd2luJztcbiAgY29uc3QgaFdpbkJhY2tncm91bmQgPSAnbWFuZGFuY2UuZ2lmJztcbiAgY29uc3QgZFdpbiA9ICdkaWFnb25hbCB3aW4nO1xuICBjb25zdCBkV2luQmFja2dyb3VuZCA9ICdjZWxlYnJhdGlvbi5naWYnO1xuICBjb25zdCBzdW5CZ0ZpbGUgPSAnc3VuYmFja2dyb3VuZC5naWYnO1xuICBjb25zdCB0cm9uQmdGaWxlID0gJ3Ryb253YWxscGFwZXIucG5nJztcbiAgY29uc3QgdHJpYW5nbGVCZ0ZpbGUgPSAnbGFzZXJ0cmlhbmdsZS5naWYnO1xuICBjb25zdCAkZ2FtZVNldHVwQnV0dG9uID0gJCgnI2dhbWVfc2V0dXBfYnV0dG9uJyk7XG4gIGNvbnN0ICRiYWNrZ3JvdW5kT3B0aW9uc0J1dHRvbiA9ICQoJyNiYWNrZ3JvdW5kX29wdGlvbnNfYnV0dG9uJyk7XG5cblxuICBmdW5jdGlvbiB2aWN0b3J5IChBLEIsQykge1xuICAgIGNvbnNvbGUubG9nKGAke0F9YCk7XG4gICAgcmVzcG9uc2l2ZVZvaWNlLnNwZWFrKGAke0F9YCk7XG4gICAgJGF1ZGlvMi5zcmMgPSBgc291bmRzLyR7Qn0ud2F2YDtcbiAgICAkYXVkaW8yLnBsYXkoKTtcbiAgICAkYXVkaW8ucGF1c2UoKTtcbiAgICAkcGxheWVyRGlzcGxheS5odG1sKGAke0F9YCk7XG4gICAgJGJvZHkuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybChwdWJsaWMvY3NzLyR7Q30pYCk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGFuZ2VCYWNrZ3JvdW5kIChEKSB7XG4gICAgY29uc29sZS5sb2coJ2NoYW5nZSBiYWNrZ3JvdW5kIScpO1xuICAgICRib2R5LmNzcygnYmFja2dyb3VuZC1pbWFnZScsIGB1cmwocHVibGljL2Nzcy8ke0R9KWApO1xuICB9XG5cbiAgLy8gR0FNRSBTRVRVUCBEUk9QRE9XTiAvL1xuICAkZ2FtZVNldHVwQnV0dG9uLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgJHN0YXJ0Z2FtZS5zbGlkZURvd24oMjAwKTtcbiAgICAkc3RvcE11c2ljLnNsaWRlRG93bigyMDApO1xuICAgICRyZXNldEJ1dHRvbi5zbGlkZURvd24oMjAwKTtcblxuICB9KTtcblxuICAvLyBCQUNLR1JPVU5EIE9QVElPTlMgRFJPUERPV04gLy9cbiAgJGJhY2tncm91bmRPcHRpb25zQnV0dG9uLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgJHN1bkJhY2tncm91bmQuc2xpZGVEb3duKDIwMCk7XG4gICAgJHRyb25CYWNrZ3JvdW5kLnNsaWRlRG93bigyMDApO1xuICAgICR0cmlhbmdsZUJhY2tncm91bmQuc2xpZGVEb3duKDIwMCk7XG5cbiAgfSk7XG5cblxuXG4gIC8vIFNUQVJUIEdBTUUgQlVUVE9OIC8vXG4gICRzdGFydGdhbWUub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zb2xlLmxvZygnY2xpY2tlZCcpO1xuICAgICRhdWRpby5zcmMgPSAnc291bmRzL2FyY2FkZWZ1bmsubXAzJztcbiAgICAkYXVkaW8ucGxheSgpO1xuICAgIHJlc3BvbnNpdmVWb2ljZS5zcGVhayhgSGVsbG8gJHthc2tQbGF5ZXJOYW1lMX0gYW5kICR7YXNrUGxheWVyTmFtZTJ9LCB3ZWxjb21lIHRvIGZ1bmt5IGxhc2VyIGNvbm5lY3QgNCwgSSBhbSB0aGUgZ2FtZSBtYXN0ZXIsIGJlZ2luIWApO1xuICB9KTtcblxuICAvL1NUT1AgTVVTSUMgQlVUVE9OLy9cbiAgJHN0b3BNdXNpYy5vbignY2xpY2snLCAoZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdzdG9wIG11c2ljIScpO1xuICAgICRhdWRpby5wYXVzZSgpO1xuICB9KTtcblxuICAvLyBSRVNFVCBCVVRUT04gLSBTRVRTIEFMTCBIVE1MIElOIENFTExTIFRPIE5PVEhJTkcgQU5EIENIQU5HRVMgQUxMIEJBQ0tHUk9VTkQgVE8gVFJBTlNQQVJFTlQgLy9cbiAgJHJlc2V0QnV0dG9uLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgJGNlbGxzLmh0bWwoJycpO1xuICAgICRwbGF5ZXJEaXNwbGF5Lmh0bWwoJ3dpbiBkaXNwbGF5Jyk7XG4gICAgJGNlbGxzLmNzcygnYmFja2dyb3VuZCcsICd0cmFuc3BhcmVudCcpO1xuICAgICRjZWxscy5hZGRDbGFzcygnbm90cGxheWFibGUnKTtcbiAgICBjb25zdCBpbmRpY2VzID0gWzM1LDM2LDM3LDM4LDM5LDQwLDQxXTtcbiAgICBpbmRpY2VzLmZvckVhY2goKGluZGV4KT0+e1xuICAgICAgJGNlbGxzLmVxKGluZGV4KS5yZW1vdmVDbGFzcygnbm90cGxheWFibGUnKS5hZGRDbGFzcygncGxheWFibGUnKTtcbiAgICB9KTtcbiAgICBjaGFuZ2VCYWNrZ3JvdW5kKHRyaWFuZ2xlQmdGaWxlKTtcblxuICB9KTtcblxuXG4gIC8vU1VOIEJBQ0tHUk9VTkQgQlVUVE9OLy9cbiAgJHN1bkJhY2tncm91bmQub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNoYW5nZUJhY2tncm91bmQoc3VuQmdGaWxlKTtcbiAgfSk7XG5cbi8vVFJPTiBCQUNLR1JPVU5EIEJVVFRPTi8vXG4gICR0cm9uQmFja2dyb3VuZC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgY2hhbmdlQmFja2dyb3VuZCh0cm9uQmdGaWxlKTtcbiAgfSk7XG5cbi8vVFJJQU5HTEUgQkFDS0dST1VORCBCVVRUT04vL1xuICAkdHJpYW5nbGVCYWNrZ3JvdW5kLm9uKCdjbGljaycsICgpID0+IHtcbiAgICBjaGFuZ2VCYWNrZ3JvdW5kKHRyaWFuZ2xlQmdGaWxlKTtcbiAgfSk7XG5cblxuICAvLyBDTElDSyBPTiBTUVVBUkU6IFBVVFMgWCBPUiBPIElOIFNRVUFSRSwgQ0hBTkdFUyBDT0xPUiwgIEFERFMgMSBUTyBUVVJOIENPVU5URVIsIE1BS0VTIFNRVUFSRSBVTlBMQVlBQkxFIChDQU4nVCBQTEFDRSBBTk9USEVSIFBJRUNFIE9OIFNRVUFSRSkgQU5EIE1BS0VTIFNRVUFSRSBBQk9WRSBQTEFZQUJMRVxuXG5cbiAgJGNlbGxzLm9uKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgY29sb3IgPSB0dXJuQ291bnRlciAlIDIgPT09IDAgPyAnIzAwRkZGRicgOiAnI0ZGMDBDQyc7XG4gICAgY29uc3QgY291bnRlciA9IHR1cm5Db3VudGVyICUgMiA9PT0gMCA/ICdYJyA6ICdPJztcbiAgICBpZiAoJChlLnRhcmdldCkuaGFzQ2xhc3MoJ3BsYXlhYmxlJykpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gJChlLnRhcmdldCkuaW5kZXgoKTtcbiAgICAgICQoZS50YXJnZXQpLmh0bWwoY291bnRlcik7XG4gICAgICAkKGUudGFyZ2V0KS5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XG4gICAgICAkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygncGxheWFibGUnKTtcbiAgICAgICQoZS50YXJnZXQpLmFkZENsYXNzKCdub3RwbGF5YWJsZScpO1xuICAgICAgJGNlbGxzLmVxKGluZGV4IC03KS5yZW1vdmVDbGFzcygnbm90cGxheWFibGUnKS5hZGRDbGFzcygncGxheWFibGUnKTtcbiAgICAgIHR1cm5Db3VudGVyKys7XG4gICAgICBjaGVja0ZvcldpbihpbmRleCk7XG4gICAgICAkYXVkaW8xLnNyYyA9ICdzb3VuZHMvYm9pbmcxLndhdic7XG4gICAgICAkYXVkaW8xLnBsYXkoKTtcbiAgICB9XG5cblxuXG4gICAgLy8gV0lOIENPTkRJVElPTlMgLy9cblxuXG4gICAgZnVuY3Rpb24gY2hlY2tGb3JXaW4oaW5kZXgpIHtcbiAgICAgIC8vIFZFUlRJQ0FMIFdJTiBDSEVDSyAtIEFTIFlPVSBDTElDSyBUTyBQTEFDRSBZT1VSIENPTE9VUiwgQ0hFQ0tTIEZPUiBNQVRDSElORyBDT0xPVVJTIElOIFRIRSBTUVVBUkVTIEJFTE9XLCBBQ0hJRVZFRCBCWSBBRERJTkcgVEhFIFdJRFRIIE9GRyBUSEUgQk9BUkQgKDcpIFRPIFRIRSBJTkRFWCBOVU1CRVIgT0YgVEhFIFNRVUFSRSBZT1UgQ0xJQ0tFRCBPTi8vXG5cbiAgICAgIGNvbnNvbGUubG9nKCdpbmRleCcsIGluZGV4LCAkY2VsbHMuZXEoaW5kZXgrNykpO1xuXG4gICAgICAvLyBjb25zdCBjdXJyZW50SW5kZXggPSAkKGUudGFyZ2V0KS5pbmRleCgpO1xuICAgICAgLy8gY29uc29sZS5sb2coJGNlbGxzLmVxKGluZGV4KzcpLmh0bWwoKSk7XG4gICAgICBpZiAoJGNlbGxzLmVxKGluZGV4KS5odG1sKCkgPT09ICRjZWxscy5lcShpbmRleCs3KS5odG1sKCkgJiZcbiAgICAgICRjZWxscy5lcShpbmRleCs3KS5odG1sKCkgPT09ICRjZWxscy5lcShpbmRleCsxNCkuaHRtbCgpICYmXG4gICAgICAkY2VsbHMuZXEoaW5kZXgrMTQpLmh0bWwoKSA9PT0gJGNlbGxzLmVxKGluZGV4KzIxKS5odG1sKCkpIHtcbiAgICAgICAgdmljdG9yeSh2V2luLHdpblNvdW5kLHZXaW5CYWNrZ3JvdW5kKTtcbiAgICAgIH1cblxuXG4gICAgICAvLyBESUFHT05BTCBXSU4gQ0hFQ0stIERJQUdPTkFMIFNRVUFSRVMgQVJFIE9OIFRIRSBXSURUSCBPRiBUSEUgQk9BUkQgKDcpIFBMVVMgT1IgTUlOVVMgT05FLiBBUyBZT1UgR08gVkVSVElDQUxMWSBVUCBUSEUgQk9BUkQgV0hJTEUgUExBWUlORywgVEhFIElOREVYIE9GIFRIRSBTUVVBUkUgWU9VIENMSUNLIE9OIFdJTEwgQkUgTE9XRVIsIFRIRVJFRk9SRSBXRSBORUVEIFRPIENIRUNLIFRIRSBTUVVBUkVTIEZVUlRIRVIgVVAgVEhFIElOREVYLCBIRU5DRSBUSEUgQ0hFQ0tTIEFSRSBQT1NJVElWRSBJTiBFSVRIRVIgTVVMVElQTEVTIE9GIDYoNy0xKSBPUiA4KDcrMSkuXG5cbiAgICAgIGlmICgkY2VsbHMuZXEoaW5kZXgpLmh0bWwoKSA9PT0gJGNlbGxzLmVxKGluZGV4KzYpLmh0bWwoKSAmJlxuICAgICAgJGNlbGxzLmVxKGluZGV4KzYpLmh0bWwoKSA9PT0gJGNlbGxzLmVxKGluZGV4KzEyKS5odG1sKCkgJiZcbiAgICAgICRjZWxscy5lcShpbmRleCsxMikuaHRtbCgpID09PSAkY2VsbHMuZXEoaW5kZXgrMTgpLmh0bWwoKVxuICAgICAgfHxcbiAgICAgICRjZWxscy5lcShpbmRleCkuaHRtbCgpID09PSAkY2VsbHMuZXEoaW5kZXgrOCkuaHRtbCgpICYmXG4gICAgICAkY2VsbHMuZXEoaW5kZXgrOCkuaHRtbCgpID09PSAkY2VsbHMuZXEoaW5kZXgrMTYpLmh0bWwoKSAmJlxuICAgICAgJGNlbGxzLmVxKGluZGV4KzE2KS5odG1sKCkgPT09ICRjZWxscy5lcShpbmRleCsyNCkuaHRtbCgpKSB7XG4gICAgICAgIHZpY3RvcnkoZFdpbix3aW5Tb3VuZCxkV2luQmFja2dyb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEhPUklaT05UQUwgV0lOIENIRUNLIC0gQ0hFQ0tTIFRPIFNFRSBXSEVUSEVSIENFTExTIEFSRSBJTiBUSEUgU0FNRSBST1cgQlkgVEFLSU5HIFRIRSBNQVRILkZMT09SIE9GIFRIRSBJTkRFWCBOVU1CRVIgT1ZFUiBUSEUgV0lEVEggT0YgVEhFIEJPQVJEICg3KS4gRklORFMgVE9QIE9GIFRIRSBSRUxFVkFOVCBST1cgQlkgQURESU5HIDYgVE8gVEhFIE1BVEguRkxPT1IgT0YgVEhFIENFTEwgSU5ERVggLyA3LiBTVEFSVFMgTE9PUCBBVCBUT1AgT0YgUk9XIExPT0tJTkcgRk9SIFNFUVVFTlRJQUwgTUFUQ0hFUyBJTiBUSEUgQ0VMTFMsIElGIElUIEZJTkRTIE9ORSwgVEhFIFNUUkVBSyBDT1VOVEVSIEFERFMgMS4gSE9SSVpPTlRBTCBXSU4gQU5OT1VOQ0VTIFdIRU4gU1RSRUFLIEhJVFMgNC5cblxuICAgICAgY29uc29sZS5sb2coTWF0aC5mbG9vcihpbmRleC83KSwgTWF0aC5mbG9vcigoaW5kZXgtMykvNyksIE1hdGguZmxvb3IoKGluZGV4KzMpLzcpKTtcblxuICAgICAgaWYgKE1hdGguZmxvb3IoaW5kZXgvNykgPT09IE1hdGguZmxvb3IoKGluZGV4LTMpLzcpIHx8IE1hdGguZmxvb3IoaW5kZXgvNykgPT09IE1hdGguZmxvb3IoKGluZGV4KzMpLzcpKXtcbiAgICAgICAgY29uc29sZS5sb2coJ2NoZWNraW5nIGhvcml6b250YWwgd2luJyk7XG4gICAgICAgIC8vIGZpbmQgdG9wIG9mIFJPV1xuICAgICAgICBsZXQgdG9wT2ZSb3cgPSBNYXRoLmZsb29yKGluZGV4LzcpICogNyArIDY7XG4gICAgICAgIGxldCBzdHJlYWsgID0gMDtcblxuICAgICAgICB3aGlsZSh0b3BPZlJvdyA+PSBNYXRoLmZsb29yKGluZGV4LzcpICogNyArIDMpIHtcbiAgICAgICAgICAvLyBjaGVjayA0IGZyb20gc3RhcnQgb2YgUk9XXG4gICAgICAgICAgWzAsLTEsLTIsLTNdLmZvckVhY2goKGkpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCh0dXJuQ291bnRlciAlIDIgPT09IDAgPyAnTycgOiAnWCcpKTtcbiAgICAgICAgICAgIGlmKCRjZWxscy5lcSh0b3BPZlJvdyArIGkpLmh0bWwoKSA9PT0gKHR1cm5Db3VudGVyICUgMiA9PT0gMCA/ICdPJyA6ICdYJykpIHtcbiAgICAgICAgICAgICAgc3RyZWFrKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZihzdHJlYWsgPT09IDQpIHtcbiAgICAgICAgICAgIHZpY3RvcnkoaFdpbix3aW5Tb3VuZCxoV2luQmFja2dyb3VuZCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0b3BPZlJvdy0tO1xuICAgICAgICAgIHN0cmVhayA9IDA7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICB9XG4gIH0pO1xuXG59KTtcbiJdfQ==
